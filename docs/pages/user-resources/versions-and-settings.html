<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Settings and Versions – LIMS Project Docs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">LIMS Project Docs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/user-resources/user-index.html"> 
<span class="menu-text">User Reference</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/database/database-index.html"> 
<span class="menu-text">Database</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/application/application-index.html"> 
<span class="menu-text">Application</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#settings" id="toc-settings" class="nav-link active" data-scroll-target="#settings">Settings</a>
  <ul class="collapse">
  <li><a href="#data-connection---use-test-mode" id="toc-data-connection---use-test-mode" class="nav-link" data-scroll-target="#data-connection---use-test-mode">Data Connection - Use Test Mode</a></li>
  <li><a href="#read-only---is-read-only" id="toc-read-only---is-read-only" class="nav-link" data-scroll-target="#read-only---is-read-only">Read Only - Is Read Only</a></li>
  <li><a href="#time-span" id="toc-time-span" class="nav-link" data-scroll-target="#time-span">Time Span</a></li>
  <li><a href="#saving-changes" id="toc-saving-changes" class="nav-link" data-scroll-target="#saving-changes">Saving Changes</a></li>
  </ul></li>
  <li><a href="#versions" id="toc-versions" class="nav-link" data-scroll-target="#versions">Versions</a>
  <ul class="collapse">
  <li><a href="#version-numbers" id="toc-version-numbers" class="nav-link" data-scroll-target="#version-numbers">Version Numbers</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="versions-and-settings.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Settings and Versions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This document explains how to view LIMS versions and know if you need to update, and how to change application settings. Both <code>Versions</code> and <code>Settings</code> are found by clicking on the little gear icon in the top right corner of the program.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/LIMS_gear_and_version.jpg" class="img-fluid figure-img"></p>
<figcaption>Version number in the title bar and the gear icon to open Versions and Settings</figcaption>
</figure>
</div>
<p>Your local LIMS application should tell you a few things right in the title bar:</p>
<ul>
<li>Whether it’s connected to the database or in <em>Test Mode</em></li>
<li>Whether it’s set to <em>Read Only</em></li>
<li>Version number</li>
</ul>
<section id="settings" class="level2">
<h2 class="anchored" data-anchor-id="settings">Settings</h2>
<p>In the window that pops up when you click the gear icon, the first <code>Data Settings</code> tab allows you to change and save a few settings that affect how the LIMS application runs on your computer.</p>
<section id="data-connection---use-test-mode" class="level3">
<h3 class="anchored" data-anchor-id="data-connection---use-test-mode">Data Connection - Use Test Mode</h3>
<p>This is an on-or-off setting that determines whether the LIMS application connects to the database or not. The default normal funcitoning is for this to be <strong>unchecked</strong>. If you check it then it will run in <em>Test Mode</em> and use a small set of internally-generated test data instead of connecting to the database.</p>
<p><em>Why use Test Mode?</em></p>
<p><em>Test Mode</em> offers a way to test the functionality of the application without making any changes to the real database. If you want to experiment with how the software works, this is a safe way to do that. It can also be useful for testing certain kinds of errors; if it seems likely that an issue is due to a connection issue, then using <em>Test Mode</em> is a way to check whether the error happens independent of the connection.</p>
</section>
<section id="read-only---is-read-only" class="level3">
<h3 class="anchored" data-anchor-id="read-only---is-read-only">Read Only - Is Read Only</h3>
<p>This is an on-or-off setting that determines whether the LIMS application is in <em>Read Only</em> mode or not. When I send out updates I will usually set this for you in advance according to what your needs are, but it’s also possible to change it yourself. If it’s checked, then LIMS will run in <em>Read Only</em> so that you can view real data from the database but you can’t edit it.</p>
</section>
<section id="time-span" class="level3">
<h3 class="anchored" data-anchor-id="time-span">Time Span</h3>
<p>This setting is a number that represents time in days. This will determine the <strong>Date Range</strong> of data that the application fetches from the database. Items like <strong>Mother Stock</strong> and <strong>Working Stock</strong> are all fetched no matter the date range, but for all other <strong>Stages</strong> LIMS will filter out everything that is older than the given number of days.</p>
<p>The default option is 1 year (365 days), and you’re given another selection option for “All Time”, and a third for a “Custom” time.</p>
<p>The purpose of this filtering is to improve the applicaiton’s performace. The more data it fetches, the longer it takes to load, and the more data is sitting in memory slowing down your computer. There are <em>some</em> situaitons where you might want to look up data about production from two years ago, but one year is plenty for most daily use.</p>
</section>
<section id="saving-changes" class="level3">
<h3 class="anchored" data-anchor-id="saving-changes">Saving Changes</h3>
<p>After you select the changes that you want to make to your settings, you need to click the <code>Save Settings</code> button at the bottom of the window. This will save the changes to the <code>config.json</code> file, so that they will be available the next time the application starts up and checks that file for details about how to run.</p>
<p>You will then be asked whether you want to restart in order to apply them now.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/settings_save_changes.jpg" class="img-fluid figure-img"></p>
<figcaption>Changes Saved Popup asks if you want to restart</figcaption>
</figure>
</div>
<ul>
<li><p>If you click <code>No</code>, then LIMS will remain open and operting under the previous set of Settings, until you close it. Your changes will appear the next time you open LIMS.</p></li>
<li><p>If you click <code>Yes</code>, then LIMS will close, the loading animation will play, and it will re-open with the new Settings in place.</p></li>
</ul>
</section>
</section>
<section id="versions" class="level2">
<h2 class="anchored" data-anchor-id="versions">Versions</h2>
<p>Whenever I release a LIMS update, the new version will have a new version number.</p>
<p>In the window that pops up when you click the gear icon, the second <code>Versions</code> tab contains more information about versioning.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/versions_popup.jpg" class="img-fluid figure-img"></p>
<figcaption>Versioning tab in Settings and Info popup</figcaption>
</figure>
</div>
<p>Note: This versioning information comes from the database, and so is only available when connected. It will appear blank if you are in <em>Test Mode</em>.</p>
<p>At the top of the tab it tells you what the current latest release number is, so you can compare it with your own and know whether you’re up to date.</p>
<p>Below that are two tables; on the left is a list of <strong>Current/Past Updates</strong>. These default to sort of descending order by version number, with the most recent version on top. The table itself tells you what date a given update was released, what section/s the update affected, and then shows the beginning of a longer explanation of what the update did. If you double-click on a particular line in the table, then the full explanation will appear in the white space below so you can read about it.</p>
<p>In the table on the right is a list of <strong>Planned Updates</strong>, and works the same way as the Current/Past list. In theory it’s a way to track and communicate ideas about future updates, but has gotten a bit stale. All the items left in it are over a year old, and most were specifically requested by an employee who doesn’t work here any more and had somewhat divergent ideas about how LIMS should work. This was used more in the early days of LIMS development.</p>
<section id="version-numbers" class="level3">
<h3 class="anchored" data-anchor-id="version-numbers">Version Numbers</h3>
<p>The version numbers have three parts, which are meant to communicate the importance of the update.</p>
<ul>
<li><p>The first digit on the left changing means a <em>breaking</em> change, something that fundamentally affects how the application interacts with the database. This usually involves some change to the backend database as well; either it was changed in a way that will cause older versions of LIMS to malfunction, or older versions of LIMS will add or edit data in a way that will undermine the newer data structure. <strong>Do not use a version with an outdated first digit</strong> unless you are using it in <strong>Read Only</strong> mode and never intend to make edits.</p></li>
<li><p>The second number is for big fixes or updates that are fairly serious and strongly recommended, but do not fundamentally change how the application interacts with the database. These are usually corrections of fairly serious errors that made LIMS unusable for certain tasks, or else additions of features that are significant but not essential. If your version is out of date in the second digit, you may encounter errors that have been fixed in later versions, but you shouldn’t be doing harm to anything but your own sanity.</p></li>
<li><p>The third digit is for smaller fixes and edits. These things are likely to be invisible except in specific, niche situations.</p></li>
</ul>
<p>The difference between the second and the third level of importance is a bit of a judgement call on my part, but I try to use it to communicate the urgency of the update.</p>
<p>In general I recommend that you always update to the latest version, so that everyone is using the <em>same</em> version and I don’t have to trouble-shoot errors across a range of versions. But you can use this information about version numbers to judge whether you need to download an update immediately or if it can wait until you’re less busy.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>